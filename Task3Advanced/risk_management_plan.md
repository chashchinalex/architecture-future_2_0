# План управления рисками

Для минимизации рисков выбрана стратегия **"Strangler Fig Pattern**: постепенная замена функционала монолита новыми сервисами, а не единовременное переписывание ("Big Bang").

## 1. Технические меры (Architecture & Tech)

### Митигация R1 (Миграция данных)
* **Использование CDC (Change Data Capture):** Внедрение инструментов типа Debezium для репликации данных из SQL 2008 в новую систему в реальном времени до полного отключения легаси.
* **Shadow Run (Теневой запуск):** Параллельная работа старой и новой систем в течение 3-х месяцев с автоматической сверкой отчетов.

### Митигация R2 (Связность) и R5 (Согласованность)
* **Schema Registry:** Строгое версионирование контрактов данных (Avro/Protobuf) для предотвращения поломок при изменении форматов.
* **Асинхронность по умолчанию:** Запрет на синхронные междоменные HTTP-вызовы (только через Event Bus), за исключением критичных real-time сценариев.
* **Transactional Outbox Pattern:** Гарантия доставки событий в шину.
* **ACID для финансов:** Финансовое ядро остается транзакционным (в рамках одной БД), согласованность в конечном счете допустима только для аналитики.

### Митигация R4 (Безопасность)
* **Data Masking:** Автоматическое обезличивание чувствительных данных при попадании в Data Lake (хеширование ID пациентов).
* **Row-Level Security (RLS):** Настройка политик доступа в витринах данных, чтобы аналитики видели только агрегаты, а врачи — только своих пациентов.

## 2. Организационные и управленческие меры

### Митигация R3 (Сопротивление персонала)
* **UX-исследования:** Проектирование интерфейсов совместно с врачами.
* **Поддержка Hotkeys:** Реализация привычного управления с клавиатуры в новом Web-интерфейсе.
* **Пилотные запуски:** Внедрение сначала в одной клинике, сбор обратной связи, доработка, и только затем масштабирование.

### Митигация R6 (Компетенции)
* **Создание Platform Team:** Выделенная команда SRE/DevOps, создающая удобную инфраструктуру для продуктовых команд (Internal Developer Platform). Это снижает порог входа для разработчиков.
* **Обучение и найм:** Привлечение Tech Lead-ов с опытом Cloud/EDA на старте проекта.

### Митигация R7 (Vendor Lock-in)
* **Open Source First:** Использование управляемых версий открытых продуктов (Managed Kafka, Managed PostgreSQL, K8s) вместо проприетарных решений облака, не имеющих аналогов.
* **Infrastructure as Code (IaC):** Описание всей инфраструктуры через Terraform для возможности быстрого развертывания у другого провайдера.